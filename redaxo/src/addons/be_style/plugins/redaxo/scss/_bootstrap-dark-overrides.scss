body.rex-theme-dark {
    // TODO
}

@media (prefers-color-scheme: dark) {
    body:not(.rex-theme-light) {

        /* body */

        background-color: $color-grey-2;
        color: $color-text-light;


        /* alert */

        .alert-success {
            @include alert-variant($dark-brand-success, darken($dark-brand-success, 5%), $color-text-light);
        }

        .alert-info {
            @include alert-variant($dark-brand-primary, darken($dark-brand-primary, 5%), $color-text-light);
        }

        .alert-warning {
            @include alert-variant($dark-brand-warning, darken($dark-brand-warning, 5%), $color-text-light);
        }

        .alert-danger {
            @include alert-variant($dark-brand-danger, darken($dark-brand-danger, 5%), $color-text-light);
        }


        /* button */

        .btn-default {
            @include button-variant($color-text-light, $color-grey-5, darken($color-grey-5, 5%));
        }
        .btn-primary {
            @include button-variant($color-text-light, $dark-brand-primary, darken($dark-brand-primary, 5%));
        }
        .btn-success {
            @include button-variant($color-text-light, $dark-brand-success, darken($dark-brand-success, 5%));
        }
        .btn-info {
            @include button-variant($color-text-light, $dark-brand-info, darken($dark-brand-info, 5%));
        }
        .btn-warning {
            @include button-variant($color-text-light, $dark-brand-warning, darken($dark-brand-warning, 5%));
        }
        .btn-danger {
            @include button-variant($color-text-light, $dark-brand-danger, darken($dark-brand-danger, 5%));
        }

        // refine hover styles
        // TODO: use @mixin rex-button-variant?
        .btn-default {
            &:focus,
            &.focus {
                background-color: darken($color-grey-5, 4%);
                border-color: darken($color-grey-5, 16%);
            }
            &:hover {
                background-color: darken($color-grey-5, 4%);
                border-color: darken($color-grey-5, 8%);
            }
        }


        /* breadcrumb */

        .breadcrumb {
            background-color: $color-grey-3;

            > li {
                + li:before {
                    color: $color-text-light;
                }
            }

            > .active {
                color: $color-text-light;
            }
        }

        /* code */

        code {
            color: #d5baff;
            background-color: rgba($color-grey-1, 0.8);
        }


        /* forms */

        legend {
            color: $color-text-light-inactive;
            border-bottom-color: rgba($color-grey-1, 0.5);
        }

        .form-control {
            color: $color-text-light;
            background-color: rgba($color-grey-2, 0.8);
            border-color: rgba($color-grey-1, 0.8);
            @include form-control-focus($color-grey-1);
            @include placeholder($color-text-light-inactive);

            &[disabled],
            &[readonly],
            fieldset[disabled] & {
                background-color: rgba($color-grey-3, 0.4);
                border-color: rgba($color-grey-2, 0.4);
            }
        }

        //.has-success {
        //    @include form-control-validation($state-success-text, $state-success-text, $state-success-bg);
        //}
        //.has-warning {
        //    @include form-control-validation($state-warning-text, $state-warning-text, $state-warning-bg);
        //}
        //.has-error {
        //    @include form-control-validation($state-danger-text, $state-danger-text, $state-danger-bg);
        //}

        .help-block {
            color: $color-text-light-inactive;
        }


        /* input-groups */

        .input-group-addon {
            color: $color-text-light;
            background-color: rgba($color-grey-3, 0.8);
            border-color: darken($color-grey-5, 5%);
        }


        /* nav */

        .nav-pills {
            > li {
                &.active > a {
                    &,
                    &:hover,
                    &:focus {
                        background-color: $color-blue-3;
                    }
                }
            }
        }

        /* panel */

        .panel {
            background-color: $color-grey-3;
        }

        .panel-footer,
        .rex-form-panel-footer {
            background-color: $color-grey-1;
            border-top-color: $color-grey-1;
        }

        .panel-default {
            @include panel-variant($color-grey-1, $color-text-light, $color-grey-1, $color-grey-1);
        }

        .panel-primary {
            //@include panel-variant($color-grey-1, $color-text-light, $color-blue-1, $color-grey-1);
            @include panel-variant($dark-brand-info, $color-text-light, $dark-brand-info, $dark-brand-info);
        }

        .panel-success {
            @include panel-variant($dark-brand-success, $color-text-light, $dark-brand-success, $dark-brand-success);
        }

        .panel-info {
            @include panel-variant($dark-brand-info, $color-text-light, $dark-brand-info, $dark-brand-info);
        }

        .panel-warning {
            @include panel-variant($dark-brand-warning, $color-text-light, $dark-brand-warning, $dark-brand-warning);
        }

        .panel-danger {
            @include panel-variant($dark-brand-danger, $color-text-light, $dark-brand-danger, $dark-brand-danger);
        }

        /* table */

        table {
            background-color: $color-grey-3;
        }

        .table {
            > thead,
            > tbody,
            > tfoot {
                > tr {
                    > th,
                    > td {
                        border-top-color: $color-grey-1;
                    }
                }
            }

            > thead > tr > th {
                border-bottom-color: $color-grey-1;
            }

            > tbody + tbody {
                border-top-color: $color-grey-1;
            }

            .table {
                background-color: $color-grey-2;
            }
        }

        .table-bordered {
            border-color: $color-grey-1;

            > thead,
            > tbody,
            > tfoot {
                > tr {
                    > th,
                    > td {
                        border-color: $color-grey-1;
                    }
                }
            }
        }

        .table-hover {
            > tbody > tr:hover {
                background-color: $color-grey-4;
            }
        }

        @include table-row-variant('active', $dark-brand-primary);
        @include table-row-variant('success', $dark-brand-success);
        @include table-row-variant('info', $dark-brand-info);
        @include table-row-variant('warning', $dark-brand-warning);
        @include table-row-variant('danger', $dark-brand-danger);


        /* thumbnail */

        .thumbnail {
            background-color: $color-grey-2;
            border-color: $color-grey-1;

            .caption {
                color: $color-text-light;
            }
        }

        a.thumbnail:hover,
        a.thumbnail:focus,
        a.thumbnail.active {
            border-color: $color-grey-3;
        }


        /* type */

        .text-muted {
            color: $color-text-light-inactive;
        }
    }
}
